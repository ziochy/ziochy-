<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcard Kanji - Luzuno</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Kiwi+Maru&family=Sawarabi+Mincho&display=swap" rel="stylesheet">
    <style>
    :root {
            --sakura-pink: #ffb7c5;
            --sakura-dark: #9f4d60;
            --sakura-bg: #fff4f7;
            --text-color: #4a2a33;
            --card-bg: rgba(255, 255, 255, 0.9);
        }

        [data-theme="dark"] {
            --sakura-pink: #6c5b7b;
            --sakura-dark: #355c7d;
            --sakura-bg: #2d3436;
            --text-color: #dfe6e9;
            --card-bg: rgba(45, 52, 54, 0.9);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Sawarabi Mincho', sans-serif;
            transition: all 0.3s ease;
        }

        body {
            background: var(--sakura-bg);
            color: var(--text-color);
            line-height: 1.7;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .level-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .level-btn {
            padding: 1rem;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-family: 'Kiwi Maru', serif;
            background: var(--card-bg);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .level-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
        }

        .level-btn.n5::before { background: #ff6b6b; }
        .level-btn.n4::before { background: #ff9f43; }
        .level-btn.n3::before { background: #54a0ff; }
        .level-btn.n2::before { background: #2ecc71; }
        .level-btn.n1::before { background: #a55eea; }

        .level-btn.active {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .flashcard-wrapper {
            position: relative;
            max-width: 600px;
            margin: 2rem auto;
            min-height: 400px;
            perspective: 1000px;
        }

        .flashcard {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            position: absolute;
            width: 100%;
            height: 100%;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard.swipe-right {
            transform: translateX(150%) rotate(15deg);
        }

        .flashcard.swipe-left {
            transform: translateX(-150%) rotate(-15deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .card-back {
            transform: rotateY(180deg);
        }

        .kanji {
            font-size: 8rem;
            text-align: center;
            margin: 2rem 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.1);
        }

        .details {
            font-size: 1.1rem;
            opacity: 0.9;
            text-align: center;
        }

        .strokes {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            font-size: 0.9rem;
            color: var(--sakura-dark);
        }

        .progress-container {
            height: 8px;
            background: rgba(0,0,0,0.1);
            border-radius: 4px;
            margin: 2rem 0;
        }

        .progress-bar {
            height: 100%;
            background: var(--sakura-pink);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .control-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            background: var(--sakura-dark);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .hint-text {
            text-align: center;
            margin: 2rem 0;
            opacity: 0.7;
        }

        @media (max-width: 768px) {
            .kanji {
                font-size: 6rem;
            }
            
            .flashcard {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
   <!-- Elemen Audio -->
    <audio id="flipSound" src="flip.mp3" preload="auto"></audio>
    <audio id="swipeLeftSound" src="card.mp3" preload="auto"></audio>
    <audio id="swipeRightSound" src="card.mp3" preload="auto"></audio>
    <audio id="levelChangeSound" src="#" preload="auto"></audio>
    <audio id="completeSound" src="#" preload="auto"></audio>
    <audio id="resetSound" src="#" preload="auto"></audio>

    <div class="container">
        <div class="level-selector">
            <button class="level-btn n5" data-level="n5">JLPT N5</button>
            <button class="level-btn n4" data-level="n4">JLPT N4</button>
            <button class="level-btn n3" data-level="n3">JLPT N3</button>
            <button class="level-btn n2" data-level="n2">JLPT N2</button>
            <button class="level-btn n1" data-level="n1">JLPT N1</button>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="flashcard-wrapper" id="flashcardWrapper"></div>

        <div class="hint-text">Geser ke kiri jika sudah hafal ‚ù§Ô∏è | Geser ke kanan untuk belajar lagi üí° | Klik untuk melihat arti</div>

        <div class="controls">
            <button class="control-btn" id="resetBtn">‚ü≥ Reset</button>
        </div>
    </div>

    <script>
        // Inisialisasi Audio
        const audio = {
            flip: document.getElementById('flipSound'),
            swipeLeft: document.getElementById('swipeLeftSound'),
            swipeRight: document.getElementById('swipeRightSound'),
            levelChange: document.getElementById('levelChangeSound'),
            complete: document.getElementById('completeSound'),
            reset: document.getElementById('resetSound')
        };

        const kanjiData = {
            n5: [
                { kanji: '‰∏Ä', onyomi: '„Ç§„ÉÅ', kunyomi: '„Å≤„Å®', meaning: 'Satu', example: '‰∏Ä‰∫∫ (Hitori)', strokes: 1 },
                { kanji: '‰∫å', onyomi: '„Éã', kunyomi: '„Åµ„Åü', meaning: 'Dua', example: '‰∫åÊó• (Futsuka)', strokes: 2 },
                { kanji: '‰∏â', onyomi: '„Çµ„É≥', kunyomi: '„Åø', meaning: 'Tiga', example: '‰∏âÊó• (Mikka)', strokes: 3 },
                { kanji: 'Âõõ', onyomi: '„Ç∑', kunyomi: '„Çà„Çì', meaning: 'Empat', example: 'ÂõõÊôÇ (Yoji)', strokes: 5 },
                { kanji: '‰∫î', onyomi: '„Ç¥', kunyomi: '„ÅÑ„Å§', meaning: 'Lima', example: '‰∫îÊó• (Itsuka)', strokes: 4 },
                { kanji: 'ÂÖ≠', onyomi: '„É≠„ÇØ', kunyomi: '„ÇÄ', meaning: 'Enam', example: 'ÂÖ≠Êó• (Muika)', strokes: 4 },
                { kanji: '‰∏É', onyomi: '„Ç∑„ÉÅ', kunyomi: '„Å™„Å™', meaning: 'Tujuh', example: '‰∏ÉÊó• (Nanoka)', strokes: 2 },
                { kanji: 'ÂÖ´', onyomi: '„Éè„ÉÅ', kunyomi: '„ÇÑ', meaning: 'Delapan', example: 'ÂÖ´Êó• (Y≈çka)', strokes: 2 },
                { kanji: '‰πù', onyomi: '„Ç≠„É•„Ç¶', kunyomi: '„Åì„Åì„ÅÆ', meaning: 'Sembilan', example: '‰πùÊó• (Kokonoka)', strokes: 2 },
                { kanji: 'ÂçÅ', onyomi: '„Ç∏„É•„Ç¶', kunyomi: '„Å®„Åä', meaning: 'Sepuluh', example: 'ÂçÅÊó• (T≈çka)', strokes: 2 },
                { kanji: 'Áôæ', onyomi: '„Éí„É£„ÇØ', kunyomi: '„ÇÇ„ÇÇ', meaning: 'Ratus', example: 'ÁôæÂÜÜ (Hyakuen)', strokes: 6 },
                { kanji: 'ÂçÉ', onyomi: '„Çª„É≥', kunyomi: '„Å°', meaning: 'Ribu', example: 'ÂçÉÂÜÜ (Sen‚Äôen)', strokes: 3 },
                { kanji: '‰∏á', onyomi: '„Éû„É≥', kunyomi: '„Çà„Çç„Åö', meaning: 'Sepuluh Ribu', example: '‰∏Ä‰∏á (Ichiman)', strokes: 3 },
                { kanji: 'Êó•', onyomi: '„Éã„ÉÅ', kunyomi: '„Å≤', meaning: 'Hari/Matahari', example: 'Êó•ÊõúÊó• (Nichiy≈çbi)', strokes: 4 },
                { kanji: 'Êúà', onyomi: '„Ç≤„ÉÑ', kunyomi: '„Å§„Åç', meaning: 'Bulan', example: 'ÊúàÊõúÊó• (Getsuy≈çbi)', strokes: 4 },
                { kanji: 'ÁÅ´', onyomi: '„Ç´', kunyomi: '„Å≤', meaning: 'Api', example: 'ÁÅ´ÊõúÊó• (Kay≈çbi)', strokes: 4 },
                { kanji: 'Ê∞¥', onyomi: '„Çπ„Ç§', kunyomi: '„Åø„Åö', meaning: 'Air', example: 'Ê∞¥ÊõúÊó• (Suiy≈çbi)', strokes: 4 },
                { kanji: 'Êú®', onyomi: '„É¢„ÇØ', kunyomi: '„Åç', meaning: 'Pohon', example: 'Êú®ÊõúÊó• (Mokuy≈çbi)', strokes: 4 },
                { kanji: 'Èáë', onyomi: '„Ç≠„É≥', kunyomi: '„Åã„Å≠', meaning: 'Uang', example: 'ÈáëÊõúÊó• (Kiny≈çbi)', strokes: 8 },
                { kanji: 'Âúü', onyomi: '„Éâ', kunyomi: '„Å§„Å°', meaning: 'Tanah', example: 'ÂúüÊõúÊó• (Doy≈çbi)', strokes: 3 },
                { kanji: 'Âπ¥', onyomi: '„Éç„É≥', kunyomi: '„Å®„Åó', meaning: 'Tahun', example: '‰ªäÂπ¥ (Kotoshi)', strokes: 6 },
                { kanji: 'ÊôÇ', onyomi: '„Ç∏', kunyomi: '„Å®„Åç', meaning: 'Waktu', example: 'ÊôÇÈñì (Jikan)', strokes: 10 },
                { kanji: 'ÂàÜ', onyomi: '„Éñ„É≥', kunyomi: '„Çè', meaning: 'Menit', example: '‰∫îÂàÜ (Gofun)', strokes: 4 },
                { kanji: 'Èñì', onyomi: '„Ç´„É≥', kunyomi: '„ÅÇ„ÅÑ„Å†', meaning: 'Interval', example: 'ÊôÇÈñì (Jikan)', strokes: 12 },
                { kanji: 'ÊØé', onyomi: '„Éû„Ç§', kunyomi: '„Åî„Å®', meaning: 'Setiap', example: 'ÊØéÊó• (Mainichi)', strokes: 6 },
                { kanji: '‰∫∫', onyomi: '„Ç∏„É≥', kunyomi: '„Å≤„Å®', meaning: 'Orang', example: 'Êó•Êú¨‰∫∫ (Nihonjin)', strokes: 2 },
                { kanji: 'Áî∑', onyomi: '„ÉÄ„É≥', kunyomi: '„Åä„Å®„Åì', meaning: 'Laki-laki', example: 'Áî∑Â≠ê (Danshi)', strokes: 7 },
                { kanji: 'Â•≥', onyomi: '„Ç∏„Éß', kunyomi: '„Åä„Çì„Å™', meaning: 'Perempuan', example: 'Â•≥Â≠ê (Joshi)', strokes: 3 },
                { kanji: 'Â≠ê', onyomi: '„Ç∑', kunyomi: '„Åì', meaning: 'Anak', example: 'Â≠ê‰æõ (Kodomo)', strokes: 3 },
                { kanji: 'Áà∂', onyomi: '„Éï', kunyomi: '„Å°„Å°', meaning: 'Ayah', example: 'Áà∂Ë¶™ (Chichioya)', strokes: 4 },
                { kanji: 'ÊØç', onyomi: '„Éú', kunyomi: '„ÅØ„ÅØ', meaning: 'Ibu', example: 'ÊØçË¶™ (Hahaoya)', strokes: 5 },
                { kanji: '‰∏ä', onyomi: '„Ç∏„Éß„Ç¶', kunyomi: '„ÅÜ„Åà', meaning: 'Atas', example: '‰∏ä„Çã (Noboru)', strokes: 3 },
                { kanji: '‰∏ã', onyomi: '„Ç´', kunyomi: '„Åó„Åü', meaning: 'Bawah', example: '‰∏ã„Åï„ÅÑ (Kudasai)', strokes: 3 },
                { kanji: '‰∏≠', onyomi: '„ÉÅ„É•„Ç¶', kunyomi: '„Å™„Åã', meaning: 'Tengah', example: '‰∏≠ÂõΩ (Ch≈´goku)', strokes: 4 },
                { kanji: 'Â§ß', onyomi: '„ÉÄ„Ç§', kunyomi: '„Åä„Åä', meaning: 'Besar', example: 'Â§ß„Åç„ÅÑ (≈åkii)', strokes: 3 },
                { kanji: 'Â∞è', onyomi: '„Ç∑„Éß„Ç¶', kunyomi: '„Å°„ÅÑ', meaning: 'Kecil', example: 'Â∞è„Åï„ÅÑ (Chiisai)', strokes: 3 },
                { kanji: 'Ë°å', onyomi: '„Ç≥„Ç¶', kunyomi: '„ÅÑ', meaning: 'Pergi', example: 'Ë°å„Åè (Iku)', strokes: 6 },
                { kanji: 'Êù•', onyomi: '„É©„Ç§', kunyomi: '„Åè', meaning: 'Datang', example: 'Êù•„Çã (Kuru)', strokes: 7 },
                { kanji: 'Ë¶ã', onyomi: '„Ç±„É≥', kunyomi: '„Åø', meaning: 'Lihat', example: 'Ë¶ã„Çã (Miru)', strokes: 7 },
                { kanji: 'ËÅû', onyomi: '„Éñ„É≥', kunyomi: '„Åç', meaning: 'Dengar', example: 'ËÅû„Åè (Kiku)', strokes: 14 },
                { kanji: 'È£ü', onyomi: '„Ç∑„Éß„ÇØ', kunyomi: '„Åü', meaning: 'Makan', example: 'È£ü„Åπ„Çã (Taberu)', strokes: 9 },
                { kanji: 'È£≤', onyomi: '„Ç§„É≥', kunyomi: '„ÅÆ', meaning: 'Minum', example: 'È£≤„ÇÄ (Nomu)', strokes: 12 },
                { kanji: 'Ë™≠', onyomi: '„Éâ„ÇØ', kunyomi: '„Çà', meaning: 'Baca', example: 'Ë™≠„ÇÄ (Yomu)', strokes: 14 },
                { kanji: 'Êõ∏', onyomi: '„Ç∑„Éß', kunyomi: '„Åã', meaning: 'Tulis', example: 'Êõ∏„Åè (Kaku)', strokes: 10 },
                { kanji: 'Èõ®', onyomi: '„Ç¶', kunyomi: '„ÅÇ„ÇÅ', meaning: 'Hujan', example: 'Èõ®Â§© (Uten)', strokes: 8 },
                { kanji: 'Èõª', onyomi: '„Éá„É≥', kunyomi: '-', meaning: 'Listrik', example: 'ÈõªÊ∞ó (Denki)', strokes: 13 },
                { kanji: 'Ëªä', onyomi: '„Ç∑„É£', kunyomi: '„Åè„Çã„Åæ', meaning: 'Mobil', example: 'ÈõªËªä (Densha)', strokes: 7 },
                { kanji: 'Ë™û', onyomi: '„Ç¥', kunyomi: '„Åã„Åü', meaning: 'Bahasa', example: 'Êó•Êú¨Ë™û (Nihongo)', strokes: 14 },
                { kanji: 'Áî∞', onyomi: '„Éá„É≥', kunyomi: '„Åü', meaning: 'Sawah', example: 'Áî∞„Çì„Åº (Tanbo)', strokes: 5 },
                { kanji: 'Â±±', onyomi: '„Çµ„É≥', kunyomi: '„ÇÑ„Åæ', meaning: 'Gunung', example: 'Â±± (Yama)', strokes: 3 },
                { kanji: 'Â∑ù', onyomi: '„Çª„É≥', kunyomi: '„Åã„Çè', meaning: 'Sungai', example: 'Â∑ù (Kawa)', strokes: 3 },
                { kanji: 'Â§©', onyomi: '„ÉÜ„É≥', kunyomi: '„ÅÇ„Åæ', meaning: 'Langit', example: 'Â§©Ê∞ó (Tenki)', strokes: 4 },
                { kanji: '‰ºë', onyomi: '„Ç≠„É•„Ç¶', kunyomi: '„ÇÑ„Åô', meaning: 'Istirahat', example: '‰ºë„ÇÄ (Yasumu)', strokes: 6 },
                { kanji: 'Â≠¶', onyomi: '„Ç¨„ÇØ', kunyomi: '„Åæ„Å™', meaning: 'Belajar', example: 'Â≠¶Ê†° (Gakk≈ç)', strokes: 8 },
                { kanji: 'Ê†°', onyomi: '„Ç≥„Ç¶', kunyomi: '-', meaning: 'Sekolah', example: 'Â≠¶Ê†° (Gakk≈ç)', strokes: 10 },
                { kanji: 'ÂÖà', onyomi: '„Çª„É≥', kunyomi: '„Åï„Åç', meaning: 'Sebelum', example: 'ÂÖàÈÄ± (Sensh≈´)', strokes: 6 },
                { kanji: 'Áîü', onyomi: '„Çª„Ç§', kunyomi: '„ÅÑ', meaning: 'Hidup', example: 'Â≠¶Áîü (Gakusei)', strokes: 5 },
                { kanji: '‰ºö', onyomi: '„Ç´„Ç§', kunyomi: '„ÅÇ', meaning: 'Bertemu', example: '‰ºö„ÅÜ (Au)', strokes: 6 },
                { kanji: 'Á§æ', onyomi: '„Ç∑„É£', kunyomi: '„ÇÑ„Åó„Çç', meaning: 'Perusahaan', example: '‰ºöÁ§æ (Kaisha)', strokes: 7 },
                { kanji: 'Â∫ó', onyomi: '„ÉÜ„É≥', kunyomi: '„Åø„Åõ', meaning: 'Toko', example: 'Â∫óÈï∑ (Tench≈ç)', strokes: 8 },
                { kanji: 'ÈßÖ', onyomi: '„Ç®„Ç≠', kunyomi: '-', meaning: 'Stasiun', example: 'ÈßÖÂâç (Ekimae)', strokes: 14 },
                { kanji: 'ÁõÆ', onyomi: '„É¢„ÇØ', kunyomi: '„ÇÅ', meaning: 'Mata', example: 'ÁõÆÊ¨° (Mokuji)', strokes: 5 },
                { kanji: 'ËÄ≥', onyomi: '„Ç∏', kunyomi: '„Åø„Åø', meaning: 'Telinga', example: 'ËÄ≥ (Mimi)', strokes: 6 },
                { kanji: 'Âè£', onyomi: '„Ç≥„Ç¶', kunyomi: '„Åè„Å°', meaning: 'Mulut', example: 'Âè£ (Kuchi)', strokes: 3 },
                { kanji: 'Êâã', onyomi: '„Ç∑„É•', kunyomi: '„Å¶', meaning: 'Tangan', example: 'ÊâãÁ¥ô (Tegami)', strokes: 4 },
                { kanji: 'Ë∂≥', onyomi: '„ÇΩ„ÇØ', kunyomi: '„ÅÇ„Åó', meaning: 'Kaki', example: 'Ë∂≥ (Ashi)', strokes: 7 },
                { kanji: 'ÁôΩ', onyomi: '„Éè„ÇØ', kunyomi: '„Åó„Çç', meaning: 'Putih', example: 'ÁôΩ„ÅÑ (Shiroi)', strokes: 5 },
                { kanji: 'Ëµ§', onyomi: '„Çª„Ç≠', kunyomi: '„ÅÇ„Åã', meaning: 'Merah', example: 'Ëµ§„ÅÑ (Akai)', strokes: 7 },
                { kanji: 'Èùí', onyomi: '„Çª„Ç§', kunyomi: '„ÅÇ„Åä', meaning: 'Biru', example: 'Èùí„ÅÑ (Aoi)', strokes: 8 },
                { kanji: 'Èªí', onyomi: '„Ç≥„ÇØ', kunyomi: '„Åè„Çç', meaning: 'Hitam', example: 'Èªí„ÅÑ (Kuroi)', strokes: 11 }
            ],
            n4: [
                { kanji: 'ÊóÖ', onyomi: '„É™„Éß', kunyomi: '„Åü„Å≥', meaning: 'Perjalanan', example: 'ÊóÖË°å (Ryoukou)', strokes: 10 },
            ],
            n3: [
                { kanji: 'Ë≠∞', onyomi: '„ÇÆ', kunyomi: '-', meaning: 'Diskusi', example: '‰ºöË≠∞ (Kaigi)', strokes: 20 },
            ],
            n2: [
                { kanji: 'Êá∏', onyomi: '„Ç±„É≥', kunyomi: '„Åã', meaning: 'Tergantung', example: 'Êá∏Âøµ (Kenen)', strokes: 20 },
            ],
            n1: [
                { kanji: 'È¨±', onyomi: '„Ç¶„ÉÑ', kunyomi: '„ÅÜ„Å£', meaning: 'Depresi', example: 'È¨±ÁóÖ (Utsubyou)', strokes: 29 },
            ]
        };
  let currentLevel = 'n5';
        let currentCards = [];
        let knownCards = [];
        let startX = 0;
        let currentX = 0;
        let isDragging = false;

        // Fungsi untuk menyimpan progres ke localStorage
        function saveProgress() {
            const progress = {
                currentLevel,
                currentCards,
                knownCards
            };
            localStorage.setItem('kanjiProgress', JSON.stringify(progress));
        }

        // Fungsi untuk memuat progres dari localStorage
        function loadProgress() {
            const progress = JSON.parse(localStorage.getItem('kanjiProgress'));
            if (progress) {
                currentLevel = progress.currentLevel;
                currentCards = progress.currentCards;
                knownCards = progress.knownCards;
                updateLevelButtons();
                updateProgress();
                showNextCard();
            } else {
                initializeDeck();
            }
        }

        // Fungsi untuk mengupdate tombol level yang aktif
        function updateLevelButtons() {
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.level === currentLevel) {
                    btn.classList.add('active');
                }
            });
        }

        // Fungsi untuk memuat ulang kartu berdasarkan level yang dipilih
        function loadDeckForLevel(level) {
            currentLevel = level;
            const savedProgress = JSON.parse(localStorage.getItem('kanjiProgress'));
            if (savedProgress && savedProgress.currentLevel === level) {
                // Jika ada progres yang tersimpan untuk level ini, gunakan progres tersebut
                currentCards = savedProgress.currentCards;
                knownCards = savedProgress.knownCards;
            } else {
                // Jika tidak ada progres yang tersimpan, inisialisasi deck baru
                currentCards = [...kanjiData[currentLevel]];
                knownCards = [];
            }
            updateLevelButtons();
            updateProgress();
            showNextCard();
            saveProgress();
        }

        function initializeDeck() {
            currentCards = [...kanjiData[currentLevel]];
            knownCards = [];
            updateProgress();
            showNextCard();
            saveProgress();
        }

        function createFlashcard(kanji) {
            const card = document.createElement('div');
            card.className = 'flashcard';
            card.innerHTML = `
                <div class="card-front">
                    <div class="kanji">${kanji.kanji}</div>
                    <div class="strokes">‚úçÔ∏è ${kanji.strokes} Stroke</div>
                </div>
                <div class="card-back">
                    <div class="details">
                        <p>üìñ On: ${kanji.onyomi}</p>
                        <p>üìñ Kun: ${kanji.kunyomi}</p>
                        <p>üéØ Arti: ${kanji.meaning}</p>
                        <p>üå∞ Contoh: ${kanji.example}</p>
                    </div>
                </div>
            `;
            return card;
        }

        function handleSwipe(direction) {
            const currentCard = document.querySelector('.flashcard');
            currentCard.classList.add(`swipe-${direction}`);
            
            // Play sound effect
            direction === 'left' ? audio.swipeLeft.play() : audio.swipeRight.play();

            setTimeout(() => {
                if (direction === 'left') {
                    knownCards.push(currentCards.shift());
                } else {
                    currentCards.push(currentCards.shift());
                }
                updateProgress();
                showNextCard();
                saveProgress(); // Simpan progres setelah swipe
            }, 600);
        }

        function showNextCard() {
            const wrapper = document.getElementById('flashcardWrapper');
            wrapper.innerHTML = '';
            
            if (currentCards.length > 0) {
                const card = createFlashcard(currentCards[0]);
                card.addEventListener('click', () => {
                    card.classList.toggle('flipped');
                    audio.flip.play();
                });
                addSwipeListeners(card);
                wrapper.appendChild(card);
            } else {
                audio.complete.play();
                wrapper.innerHTML = `<div class="flashcard" style="display: flex; align-items: center; justify-content: center;">
                    <h2>üéâ Sudah selesai! üéâ</h2>
                </div>`;
            }
        }

        function addSwipeListeners(element) {
            element.addEventListener('mousedown', startDrag);
            element.addEventListener('touchstart', startDrag);
            element.addEventListener('mousemove', duringDrag);
            element.addEventListener('touchmove', duringDrag);
            element.addEventListener('mouseup', endDrag);
            element.addEventListener('touchend', endDrag);
        }

        function startDrag(e) {
            isDragging = true;
            startX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
            currentX = startX;
        }

        function duringDrag(e) {
            if (!isDragging) return;
            const x = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
            const delta = x - currentX;
            currentX = x;
            
            const card = document.querySelector('.flashcard');
            const rotate = delta * 0.1;
            card.style.transform = `translateX(${delta}px) rotate(${rotate}deg)`;
        }

        function endDrag(e) {
            if (!isDragging) return;
            isDragging = false;
            
            const card = document.querySelector('.flashcard');
            const delta = currentX - startX;
            
            if (Math.abs(delta) > 100) {
                handleSwipe(delta > 0 ? 'right' : 'left');
            } else {
                card.style.transform = '';
            }
        }

        function updateProgress() {
            const total = kanjiData[currentLevel].length;
            const known = knownCards.length;
            const progress = (known / total) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        // Event Listeners
        document.querySelectorAll('.level-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                audio.levelChange.play();
                document.querySelector('.level-btn.active').classList.remove('active');
                this.classList.add('active');
                loadDeckForLevel(this.dataset.level); // Muat ulang kartu untuk level yang dipilih
            });
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            audio.reset.play();
            initializeDeck(); // Reset progres untuk level yang sedang dipelajari
        });

        // Muat progres saat halaman dimuat
        loadProgress();
    </script>
</body>
</html>g